/*! soon-ui 2020-11-08 */

!function(a,b){function c(a){var c,d,e,f,g;for(a.stopPropagation(),c=b(a.target);"DT"!==(d=c.nodeName());){if("DL"===d||"A"===d)return;c=c.parent()}if(e=function(){var a;this._currentMenu=c,this._currentMenu.addClass(h).addClass(i),(a=this._getSubmenuElement())&&(a.addClass(h).addClass(i),this.subShow(a,this.hasAnimation()))}.bind(this),f=function(){var a;this._currentMenu.removeClass(h).removeClass(i),a=this._getSubmenuElement(),a.removeClass(h).removeClass(i),a.css("display","none"),this._currentMenu[0]!==c[0]?(this._currentMenu=null,e()):this._currentMenu=null}.bind(this),this._currentMenu){if(g=this._getSubmenuElement())return void this.subHide(g,this.hasAnimation(),f);this._currentMenu.removeClass(h).removeClass(i)}e()}function d(a){var c,d,e,f,g;for(a.stopPropagation(),c=b(a.target);"DT"!==(d=c.nodeName());){if("DL"===d||"A"===d)return;c=c.parent()}e=c.next(),0!==e.length&&"DD"===e.nodeName()&&(f=function(){var a;this._currentMenu=c,this._currentMenu.addClass(h).addClass(i),a=this._getSubmenuElement(),a.addClass(h).addClass(i),this.subShow(a,this.hasAnimation())}.bind(this),g=function(){var a;this._currentMenu.removeClass(h).removeClass(i),a=this._getSubmenuElement(),a.removeClass(h).removeClass(i),a.css("display","none"),this._currentMenu=null}.bind(this),this._currentMenu?this._currentMenu[0]===c[0]?this.subHide(this._getSubmenuElement(),this.hasAnimation(),g):(this._currentMenu.removeClass(h).removeClass(i),this._currentMenu=null,f()):f())}var e,f,g="ui-menu-button-show",h="current-menu",i="head-color";e={show:function(a){var b,c,d,e;return!1===a?(this.resize(),void this._fireResize()):(b=this.menuPanelAnimator,b.stop(),c=b[0],(d=parseInt(c.target.css("left"),10))>=0?void c.target.css("left","0px"):(c.begin=d,c.end=0,b.length>1&&(c=b[1],c.begin=parseInt(c.target.css("left"),10),c.end=this.menuWidth,c=b[2],c.begin=parseInt(c.target.css("width"),10),c.end=document.documentElement.clientWidth-this.menuWidth),e=this,void b.start().then(function(){e.hideState=!1,1===b.length&&e.fire("shown")})))},hide:function(a){var b,c,d,e;return!1===a?(this.resize(),void this._fireResize()):(b=this.menuPanelAnimator,b.stop(),c=b[0],(d=parseInt(c.target.css("left"),10))<=-this.menuWidth?void c.target.css("left",-this.menuWidth+"px"):(b[0].begin=d,b[0].end=-this.menuWidth,b.length>1&&(c=b[1],c.begin=parseInt(c.target.css("left"),10),c.end=0,c=b[2],c.begin=parseInt(c.target.css("width"),10),c.end=document.documentElement.clientWidth),e=this,void b.start().then(function(){e.hideState=!0,1===b.length&&e.fire("hidden")})))},subShow:function(b,c){var d,e,f,g,h,i;if(e=b.children("ul"),0!==(f=e.children().length))return d=30*f,b.prev().find(".allow").removeClass("fa-angle-down").addClass("fa-angle-up"),!1===c?(b.css({display:"block",height:d+"px"}),void e.css("top","0px")):(g=this.submenuAnimator,g.stop(),g.duration=360,h=g[0],h.target=b,h.begin=b.height(),h.end=d,h.ease=a.AnimationStyle.easeTo,h.target.css("display","block"),i=h.end-h.begin,h=g[1],h.target=e,h.begin=-i,h.end=0,h.ease=a.AnimationStyle.easeTo,h.target.css("top",-i+"px"),g.onEnd=null,g.start())},subHide:function(b,c,d){var e,f,g,h;return b.prev().find(".allow").removeClass("fa-angle-up").addClass("fa-angle-down"),e=b.children("ul"),f=30*e.children().length,a.core.isFunction(c)&&(d=c,c=void 0),!1===c?(b.css({display:"none",height:"0px"}),e.css("top",-f),void(a.core.isFunction(d)&&d())):(g=this.submenuAnimator,g.stop(),h=g[0],h.target=b,g.duration=360,h.begin=b.height(),h.end=0,h.ease=a.AnimationStyle.easeFrom,h=g[1],h.target=e,h.begin=parseFloat(h.target.css("top")),h.end=-f,h.ease=a.AnimationStyle.easeFrom,g.onEnd=d,g.start())},resize:function(a,b){this.isShow()?(this.isExtrusion()&&(a||(a=document.documentElement.clientWidth),this.option.contentContainer.css({width:a-this.menuWidth+"px",left:this.menuWidth+"px"})),this.option.menuPanel.css("left","0"),this.fire("shown")):(this.isExtrusion()&&this.option.contentContainer.css({width:"100%",left:"0"}),this.option.menuPanel.css({left:-this.menuWidth+"px"}),this.fire("hidden"))}},f={show:function(a){var b;this.onMenuItemClickHandler=this.onMenuItemNormalClickHandler,this._currentMenu&&(this.submenuPanel.removeClass(h).removeClass(i),this.submenuPanel.css("display","none"),this.submenuList.html(""),(b=this._getSubmenuElement(!1))&&(b.addClass(h).addClass(i),e.subShow.call(this,b,!1))),this._updateStatusToSrc(!1),this.resize(),this._fireResize()},hide:function(a){var b;this.onMenuItemClickHandler=this.onMenuItemModernClickHandler,this._currentMenu&&(b=this._getSubmenuElement(!1),b&&e.subHide.call(this,b,!1,function(){b.removeClass(h).removeClass(i),b.css("display","none")}),this._currentMenu.removeClass(h).removeClass(i),this._currentMenu=null),this._updateStatusToSrc(!0),this.resize(),this._fireResize()},subShow:function(a,b){var c,d,f;if(this.isShow())e.subShow.apply(this,arguments);else{if(!1===b)return this._setSubmenuList(),void this.submenuPanel.css("display","block");if(c=this.submenuPanelAnimator,c.isStarted)return;c.onEnd=null,f=function(){var a;this.submenuList.css("display","none"),this._setSubmenuList(),a=this,setTimeout(function(){var b;a.submenuList.css({display:"block",left:-a.menuWidth+"px"}),b=a.submenuListAnimator[0],b.begin=-a.menuWidth,b.end=0,a.submenuListAnimator.start()})}.bind(this),"none"===a.css("display")?(d=c[0],d.begin=-(this.menuWidth-this.menuNarrowWidth)+this.menuNarrowWidth,d.end=this.menuNarrowWidth,d.target.css("display","block"),c.onEnd=f,c.start()):f()}},subHide:function(a,b,c){var d,f,g;if(this.isShow())e.subHide.apply(this,arguments);else{if(!1===b)return this.submenuPanel.css("display","none"),c(),void this.submenuList.html("");if(d=this.submenuPanelAnimator,d.isStarted)return;f=d[0],f.begin=this.menuNarrowWidth,f.end=-(this.menuWidth-this.menuNarrowWidth),g=this,d.onEnd=c,d.start().then(function(){g.submenuList.html("")})}},resize:function(a,b){a||(a=document.documentElement.clientWidth-this.menuNarrowWidth),this.isShow()?(this.isExtrusion()&&this.option.contentContainer.css({width:a-(this.menuWidth-this.menuNarrowWidth)+"px",left:this.menuWidth+"px"}),this.option.menuPanel.removeClass("ui-menu-panel-narrow"),this.option.menuPanel.css("width",this.menuWidth+"px"),this.fire("shown")):(this.isExtrusion()&&this.option.contentContainer.css({width:a+(this.menuWidth-this.menuNarrowWidth)+"px",left:this.menuNarrowWidth+"px"}),this.option.menuPanel.addClass("ui-menu-panel-narrow"),this.option.menuPanel.css("width",this.menuNarrowWidth+"px"),this.fire("hidden"))},_setSubmenuList:function(){var a,b,c,d,e;if(a=this._getSubmenuElement(!1)){for(b=[],e=a.children().children(),c=0,d=e.length;c<d;c++)b.push(e[c].outerHTML);this.submenuList.html(b.join(""))}}},a.ctrls.define("ui.ctrls.Menu",{_defineOption:function(){return{style:"normal",urlPrefix:"",menuPanel:null,contentContainer:null,extendMethod:"extrusion",menuButton:null,defaultShow:!1,animation:!0}},_defineEvents:function(){return["shown","hidden"]},_create:function(){var a,g;this.menuWidth=240,this.menuNarrowWidth=48,this._menuButtonBg=null,this.hasMenuButton=this.option.menuButton&&this.option.menuButton.length,this.hasMenuButton&&(this._menuButtonBg=b("<b class='menu-button-background title-color'></b>"),this.option.menuButton.addClass("ui-menu-button"),this.option.menuButton.append(this._menuButtonBg),this.option.menuButton.append("<b class='menu-inner-line a'></b>").append("<b class='menu-inner-line b'></b>").append("<b class='menu-inner-line c'></b>")),"modern"!==this.option.style&&(this.option.style="normal"),this.isModern()?(a=f,this.hamburgButton="modern-hamburg",this.hamburgCloseButton="modern-hamburg-close",this._initSubmenuPanel()):(a=e,this.hamburgButton="normal-hamburg",this.hamburgCloseButton="normal-hamburg-close");for(g in a)a.hasOwnProperty(g)&&(this[g]=a[g]);this.hasAnimation()&&(this._initMenuPanelAnimator(),this._initSubmenuAnimator()),this.onMenuItemNormalClickHandler=c.bind(this),this.onMenuItemModernClickHandler=d.bind(this),this.onMenuItemClickHandler=this.onMenuItemNormalClickHandler},_render:function(){this.menuList=b("<dl class='menu-list title-color' />"),this.option.menuPanel.addClass("title-color"),this.option.menuPanel.css("width",this.menuWidth+"px"),this.option.menuPanel.append(this.menuList),this.hasMenuButton&&this.option.menuButton.addClass(this.hamburgButton),this._initMenuList(),this.defaultShow()?this.hasMenuButton&&this.option.menuButton.addClass(g).addClass(this.hamburgCloseButton):this.hide(!1)},_initMenuPanelAnimator:function(){var b=this;this.menuPanelAnimator=a.animator({target:this.option.menuPanel,ease:a.AnimationStyle.easeTo,onChange:function(a,b){b.css("left",a+"px")}}),this.isExtrusion()&&this.menuPanelAnimator.add({target:this.option.contentContainer,ease:a.AnimationStyle.easeTo,onChange:function(a,b){b.css("left",a+"px")}}).add({target:this.option.contentContainer,ease:a.AnimationStyle.easeTo,onChange:function(a,c){c.css("width",a+"px"),mp.contentBodyWidth=a,b._fireResize()}}),this.menuPanelAnimator.duration=300},_initSubmenuAnimator:function(){this.submenuAnimator=a.animator({onChange:function(a,b){b.css("height",parseInt(a,10)+"px")}}).add({onChange:function(a,b){b.css("top",parseInt(a,10)+"px")}})},_initSubmenuPanel:function(){this.submenuPanel=b("<div class='submenu-slide-panel' />"),this.submenuPanel.css({left:this.menuNarrowWidth+"px",width:this.menuWidth-this.menuNarrowWidth+"px"}),this.submenuPanel.addClass("title-color"),this.submenuList=b("<ul class='submenu-list' />"),this.submenuPanel.append("<b class='submenu-background'></b>"),this.submenuPanel.append(this.submenuList),this.option.menuPanel.prepend(this.submenuPanel),this.hasAnimation()&&this._initSubmenuPanelAnimator()},_initSubmenuPanelAnimator:function(){this.submenuPanelAnimator=a.animator({target:this.submenuPanel,ease:a.AnimationStyle.easeTo,onChange:function(a){this.target.css("left",a)}}),this.submenuPanelAnimator.duration=200,this.submenuListAnimator=a.animator({target:this.submenuList,ease:a.AnimationStyle.easeTo,onChange:function(a){this.target.css("left",a+"px")}}),this.submenuListAnimator.duration=100},_initMenuList:function(){var a,b;this._updateMenuSelectedStatus(),b=this,this.menuList.on("click",function(a){b.onMenuItemClickHandler(a)}),this.hasMenuButton&&(a=this.option.menuButton,a.on("click",function(c){a.hasClass(g)?(a.removeClass(g).removeClass(b.hamburgCloseButton),b.hide(b.hasAnimation())):(a.addClass(g).addClass(b.hamburgCloseButton),b.show(b.hasAnimation()))}))},_updateMenuSelectedStatus:function(){var a;this._currentMenu=this.option.menuPanel.find("dt."+h),0===this._currentMenu.length&&(this._currentMenu=null),this._isCloseStatus()?(this.option.menuButton.removeClass(g).removeClass(this.hamburgCloseButton),this.hide(!1)):this._currentMenu&&(a=this._currentMenu.next(),"DD"===a.nodeName()&&this.subShow(a,!1))},_getSubmenuElement:function(b){var c;return a.core.isBoolean(b)||(b=!this.isShow()),this.isModern()&&b?c=this.submenuPanel:(c=this._currentMenu.next(),0!==c.lenght&&"DD"===c.nodeName()||(c=null)),c},_fireResize:function(){this.disableResizeable=!0,a.page.fire("resize"),this.disableResizeable=!1},_parentCode:function(a){var b;return a?(b=a.lastIndexOf("_"),b<0?null:a.substring(0,b)):null},_getUrl:function(b){var c,d=/^(http|https):\/\/\w*/i;return a.str.isEmpty(b)?"":0===b.indexOf("javascript:")?b:(c=d.test(b)?b:""+b,this.option.urlPrefix+c)},_addMenuCodeToSrc:function(b,c){var d=this._getUrl(b);return 0===d.indexOf("javascript:")?d:a.str.isEmpty(d)?"javascript:void(0)":(a.str.isEmpty(c)||(d.indexOf("?")>-1?d+="&_m="+a.str.base64Encode(c):d+="?_m="+a.str.base64Encode(c)),d)},_updateStatusToSrc:function(a){var c,d,e,f,g,h,i;for(i=a?this._addMenuStatus:this._removeMenuStatus,c=this.option.menuPanel.children(".menu-list").children(".menu-item"),d=0,e=c.length;d<e;d++)if(f=b(c[d]),"DD"===f.next().nodeName())for(d++,h=f.next().children().children(),g=0;g<h.length;g++)i.call(this,b(h[g]).children(".menu-item-container").children("a"));else i.call(this,f.children(".menu-item-container").children("a"))},_addMenuStatus:function(a){var b,c;b=this._getUrl(a.attr("href")),0!==b.indexOf("javascript:")&&(c=b.indexOf("?"),b+=-1==c?"?_s=close":"&_s=close",a.attr("href",b))},_removeMenuStatus:function(a){var b,c,d,e;if(b=this._getUrl(a.attr("href")),0!==b.indexOf("javascript:")&&(c=b.split("?"),1!==c.length)){d=c[1].split("&");for(var f=0,g=d.length;f<g;f++)if((e=d[f])&&0===e.indexOf("_s=")){d.splice(f,1);break}a.attr("href",c[0]+"?"+d.join("&"))}},_isCloseStatus:function(){return"close"===a.url.getLocationParam("_s")},setMenuList:function(b,c,d){var e,f,g,h,j,k,l;if(this.menuList.empty(),Array.isArray(b)&&0!==b.length){for(e=[],a.str.isEmpty(c)&&(c=a.url.getLocationParam("_m"),c=a.str.base64Decode(c)),a.str.isEmpty(d)&&(d=this._parentCode(c)),j=0,k=b.length;j<k;j++)if(f=b[j],h=a.str.isEmpty(d)?f.resourceCode===c?" current-menu "+i+" selection-menu":"":f.resourceCode===d?" current-menu "+i:"",e.push("<dt class='menu-item",h,"'>"),e.push("<b class='menu-item-background'><b class='menu-item-color'></b></b>"),e.push("<u class='menu-item-container'>"),e.push("<i class='icon'>"),e.push("<img class='icon-img' src='",f.icon?this.option.urlPrefix+f.icon:"","' />"),e.push("</i>"),e.push("<span class='menu-item-text'>",f.resourceName,"</span>"),Array.isArray(f.children)&&0!==f.children.length?e.push("<i class='allow far fa-angle-down'></i>"):e.push("<a class='direct' href='",this._addMenuCodeToSrc(f.url,f.resourceCode),"'></a>"),e.push("</u></dt>"),Array.isArray(f.children)&&f.children.length>0){for(e.push("<dd class='submenu-panel",h,"'>"),e.push("<ul class='submenu-list'>"),l=0;l<f.children.length;l++)g=f.children[l],h=g.resourceCode===c?" selection-menu":"",e.push("<li class='submenu-item",h,"'>"),e.push("<b class='menu-item-background'><b class='menu-item-color'></b></b>"),e.push("<u class='menu-item-container'>"),e.push("<span class='submenu-item-text'>",g.resourceName,"</span>"),e.push("<a class='direct' href='",this._addMenuCodeToSrc(g.url,g.resourceCode),"'></a>"),e.push("</u>"),e.push("</li>");e.push("</ul></dd>")}this.menuList.html(e.join("")),a.setTask(function(){this._updateMenuSelectedStatus()}.bind(this))}},hasAnimation:function(){return!!this.option.animation},isModern:function(){return"modern"===this.option.style},isShow:function(){return!this.hasMenuButton||this.option.menuButton.hasClass(g)},defaultShow:function(){return!!this.option.defaultShow},isExtrusion:function(){return"extrusion"===this.option.extendMethod&&this.option.contentContainer&&this.option.contentContainer.length>0}})}(ui,$),function(a,b){function c(b){b.rank=++d,a.page.plugin(b)}var d=10;a.page.getUrl=function(a){var b,c=this.contextUrl||"/";return a?(a=a.trim(),b=c.charAt(c.length-1),"/"!==b&&"\\"!==b||(c=c.substring(0,c.length-1)+"/"),b=a.charAt(0),"/"!==b&&"\\"!==b||(a=a.substring(1)),c+a):c},a.page.hasMenu=function(){return!!this.menu},c({name:"master",handler:function(c){function d(){var a,b;this.menu&&this.menu.disableResizeable||(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight,this.head&&this.head.length>0?b-=this.head.height():this.head=null,this.foot&&this.foot.length>0?b-=this.foot.height():this.foot=null,this.body&&this.body.length>0?this.body.css("height",b+"px"):this.body=null,this.contentBodyHeight=b,this.contentBodyWidth=a,this.menu&&this.menu.isShow()&&this.menu.resize(this.contentBodyWidth,this.contentBodyHeight))}this.head=b("#head"),this.body=b("#body"),this.foot=b("#foot"),this.sidebarManager=a.SidebarManager(),d.call(this),a.page.resize(d.bind(this),a.eventPriority.bodyResize),a.core.isFunction(c)&&c.call(this)}}),c({name:"homeButton",handler:function(c){var d=b(".ui-home-button");0!==d.length&&a.core.isFunction(c)&&c.call(this,d)}}),c({name:"menu",handler:function(c){var d,e=this;a.core.isFunction(c)?this.menu=c.call(this):c&&(d=b(".ui-home-button"),d.empty(),this.menu=a.ctrls.Menu({style:"normal",menuPanel:b(".ui-menu-panel"),contentContainer:b(".content-container"),extendMethod:"cover",menuButton:d.length>0?d:null}),this.menu.shown(function(a){this.isExtrusion()&&(this.isModern()?e.contentBodyWidth-=this.menuWidth-this.menuNarrowWidth:e.contentBodyWidth-=this.menuWidth)}),this.menu.hidden(function(a){this.isExtrusion()&&(this.isModern()?e.contentBodyWidth+=this.menuWidth-this.menuNarrowWidth:e.contentBodyWidth+=this.menuWidth)}))}}),c({name:"userPanel",handler:function(c){var d,e,f,g,h,i,j,k,l,m,n,o={name:"姓名",department:"部门",position:"职位",changeHighlightUrl:"",operateList:[{text:"个性化",url:"###"},{text:"修改密码",url:"###"},{text:"退出",url:"###"}]};if(a.core.isFunction(c)&&(o=a.extend(o,c.call(this))),d=b("#user"),0!==d.length){if(n=this,e=b("<section class='user-settings' />"),f=b("<div class='user-info' />"),g=b("<div class='highlight-panel' />"),h=b("<div class='operate-list' />"),i=[],i.push("<div class='protrait-cover'>","<img class='protrait-img' src='",d.children("img").prop("src"),"' alt='用户头像' /></div>","<div class='user-info-panel'>","<span class='user-info-text' style='font-size:18px;line-height:36px;'>",a.str.htmlEncode(o.name),"</span><br />"),o.department&&i.push("<span class='user-info-text'>",a.str.htmlEncode(o.department),"</span><br />"),o.position&&i.push("<span class='user-info-text'>",a.str.htmlEncode(o.position),"</span>"),i.push("</div>","<br clear='left' />"),f.append(i.join("")),a.theme.currentHighlight||a.theme.initHighlight(),Array.isArray(a.theme.highlights)){for(i=[],i.push("<h3 class='highlight-group-title font-highlight'>个性色</h3>"),i.push("<div style='width:100%;height:auto'>"),j=0,k=a.theme.highlights.length;j<k;j++)l=a.theme.highlights[j],i.push("<a class='highlight-item"),l.Id===a.theme.currentHighlight.Id&&i.push(" highlight-item-selected"),i.push("' href='javascript:void(0)' style='background-color:",l.Color,";"),i.push("' title='",l.Name,"' data-index='",j,"'>"),i.push("<i class='fa fa-check-circle highlight-item-checker'></i>"),i.push("</a>");i.push("</div>"),g.append(i.join("")),a.setTask(function(){n._currentHighlightItem=g.find(".highlight-item-selected"),0===n._currentHighlightItem.length&&(n._currentHighlightItem=null)}),g.on("click",function(c){var d,e;for(d=b(c.target);!d.hasClass("highlight-item");){if(d.hasClass("highlight-panel"))return;d=d.parent()}e=a.theme.highlights[parseInt(d.attr("data-index"),10)],n._currentHighlightItem&&n._currentHighlightItem.removeClass("highlight-item-selected"),n._currentHighlightItem=d,n._currentHighlightItem.addClass("highlight-item-selected"),a.core.isFunction(o.changeHighlightUrl)?o.changeHighlightUrl.call(null,e):o.changeHighlightUrl&&a.theme.changeHighlight(o.changeHighlightUrl,e)})}i=[],o.operateList&&o.operateList.length>0&&(i.push("<ul class='operate-list-ul'>"),o.operateList.forEach(function(b){b.text&&i.push("<li class='operate-list-li theme-panel-hover'>","<span class='operate-text'>",a.str.htmlEncode(b.text),"</span>","<a class='operate-list-anchor' href='",b.url,"'></a>","</li>")}),i.push("</ul>")),h.append(i.join("")),e.append(f).append(g).append("<hr class='horizontal' />").append(h),m=this.sidebarManager.setElement("userSidebar",{parent:"body",width:240},e),m._closeButton.attr("style","color:#fff !important;width:32px;height:32px;"),e.before("<div class='user-settings-background title-color' />"),m.animator[0].ease=a.AnimationStyle.easeFromTo,m.contentAnimator=a.animator({target:e,begin:100,end:0,ease:a.AnimationStyle.easeTo,onChange:function(a,b){b.css("left",a+"%")}}),m.contentAnimator.duration=200,m.showing(function(){e.css("display","none")}),m.shown(function(){e.css({display:"block",left:"100%"}),this.contentAnimator.start()}),d.on("click",function(a){n.sidebarManager.show("userSidebar")})}}}),c({name:"toolbar",handler:function(b){var c,d=!1;if(a.core.isFunction(b))return void(this.toolbar=b.call(this));if(a.core.isString(b)||a.core.isDomObject(b))c=b;else{if(!a.core.isPlainObject(b))return;c=b.id,d=!!b.extendShow}this.toolbar=a.Toolbar({toolbarId:c,defaultExtendShow:d})}})}(ui,$),function(a,b){function c(){if(!(this instanceof c))return new c;this.initialize()}c.prototype={constructor:c,initialize:function(){return this.sidebars=new a.KeyArray,this},setElement:function(b,c,d){var e=null,f=this;if(!a.str.isEmpty(b)){if(this.sidebars.containsKey(b))e=this.sidebars.get(b),d&&e.set(d);else{if(!c||!c.parent)throw new Error("option is null");e=a.ctrls.SidebarBase(c,d),e.hiding(function(a){f.currentBar=null}),this.sidebars.set(b,e)}return e}},get:function(b){return a.str.isEmpty(b)?null:this.sidebars.containsKey(b)?this.sidebars.get(b):null},remove:function(b){a.str.isEmpty(b)||this.sidebars.containsKey(b)&&this.sidebars.remove(b)},isShow:function(){return this.currentBar&&this.currentBar.isShow()},show:function(b){if(!a.str.isEmpty(b)){var c=null,d=this;return this.sidebars.containsKey(b)?(c=this.sidebars.get(b),c.isShow()?null:this.currentBar?this.currentBar.hide().then(function(){d.currentBar=c,c.show()}):(this.currentBar=c,c.show())):null}},hide:function(){var b=this.currentBar;return a.str.isEmpty(name)?b=this.currentBar:this.sidebars.containsKey(name)&&(b=this.sidebars.get(name)),b.isShow()&&b?(this.currentBar=null,b.hide()):null}},a.SidebarManager=c}(ui,$),function(a,b){function c(a,b){if(!(this instanceof c))return new c(a,b);this.initialize(a,b)}function d(a,b){if(!(this instanceof d))return new d(a,b);this.initialize(a,b)}function e(a){if(!(this instanceof e))return new e(a);this.initialize(a)}var f,g={small:{width:62,height:62,iconSize:32,countX:1,countY:1},medium:{width:128,height:128,iconSize:64,countX:2,countY:2},wide:{width:260,height:128,iconSize:64,countX:4,countY:2},large:{width:260,height:260,iconSize:64,countX:4,countY:4}},h=a.ctrls.ControlBase.prototype.defineProperty,i=["name","title","icon","link","color"];f={rotate:{render:function(){this.tileInnerBack=b("<div class='tile-inner' style='display:none'>"),this.tileInnerBack.css("background-color",this.color),this.updatePanel=b("<div class='update-panel' />"),this.tileInnerBack.append(this.updatePanel).append(function(){var a=b("<div class='tile-title' />"),c=b("<span class='tile-title-text' />");return c.text(this.title),a.append(c),a}.call(this)),this.smallIconImg=b("<img class='tile-small-icon' />"),this.smallIconImg.prop("src",this.icon),this.tileInnerBack.append(this.smallIconImg),this.tilePanel.append(this.tileInnerBack),this.updateStyle._createAnimator.call(this)},_createAnimator:function(){var b,c;c=2*this.width,b=function(a){var b={},d="perspective("+c+"px) rotateX("+a+"deg)";return["-ms-","-moz-","-webkit-","-o-",""].forEach(function(a){b[a+"transform"]=d}),b},this.animator=a.animator({ease:a.AnimationStyle.easeFrom,begin:0,end:-90,duration:500,onChange:function(a){this.target.css(b(a))}}).add({ease:function(a){return(a-=1)*a*(4*a+3)+1},begin:90,end:0,delay:500,duration:500,onChange:function(a){var c=b(a);c.display="block",this.target.css(c)}}),this.animator.onEnd=function(){this[0].target.css("display","none")}},_play:function(){var a=this;this.link&&this.link.css("display","none"),this.animator.start().then(function(){var b;b=a.tileInnerBack,a.tileInnerBack=a.tileInner,a.tileInner=b,a.link&&a.link.css("display","block")})},update:function(a){var b;a&&this.updatePanel.html(a),this.isDynamicChanged||(b=this.animator[0],b.target=this.tileInner,b.begin=0,b.end=-90,b=this.animator[1],b.target=this.tileInnerBack,b.begin=90,b.end=0,this.updateStyle._play.call(this))},restore:function(){var a;this.isDynamicChanged&&(a=this.animator[0],a.target=this.tileInner,a.begin=0,a.end=90,a=this.animator[1],a.target=this.tileInnerBack,a.begin=-90,a.end=0,this.updateStyle._play.call(this))}},moveup:{render:function(){this.updatePanel=b("<div class='update-panel' />"),this.updatePanel.css("top","100%"),this.contentPanel.append(this.updatePanel),this.smallIconImg=b("<img class='tile-small-icon' />"),this.smallIconImg.prop("src",this.icon),this.animator=a.animator({target:this.contentPanel,ease:a.AnimationStyle.easeFromTo,duration:800,begin:0,end:this.height,onChange:function(a){this.target.scrollTop(a)}})},update:function(a){var b;a&&this.updatePanel.html(a).append(this.smallIconImg),this.isDynamicChanged||(this.animator.stop(),b=this.animator[0],b.begin=0,this.animator.start())},restore:function(){var a;this.isDynamicChanged&&(this.animator.stop(),a=this.animator[0],0!==a.target.scrollTop()&&(a.begin=a.target.scrollTop(),a.end=0,this.animator.start()))}}},c.prototype={constructor:c,initialize:function(b,c){var d,e;if(this.type=(b.type+"").toLowerCase(),!(d=g[this.type]))throw new TypeError("Invalid tile type: "+this.type);this.group=c,this.isDynamic=!1,this.isActivated=!1,this.isDynamicChanged=!1,this.width=d.width,this.height=d.height,this.iconSize=d.iconSize,this.countX=d.countX,this.countY=d.countY,this.locationX=0,this.locationY=0,this.tileInfo=b||{},e=this,i.forEach(function(c){var d,f,g;b.hasOwnProperty(c)&&(d=function(){return e.tileInfo[c]},g="_set"+c.charAt(0).toUpperCase()+c.substring(1),a.core.isFunction(e[g])&&(f=function(a){e.tileInfo[c]=a,e[g](a)}),h.call(e,c,d,f))}),"moveup"===this.tileInfo.updateStyle?this.updateStyle=f.moveup:this.updateStyle=f.rotate,this.updateFn=a.core.isFunction(this.tileInfo.updateFn)?this.tileInfo.updateFn:null,this.updateFn&&(this.isDynamic=!0,this.interval=a.core.isNumber(this.tileInfo.interval)?this.tileInfo.interval:60,this.interval<=0&&(this.interval=60)),this._render()},_render:function(){this.tilePanel=b("<div class='ui-tile tile-"+this.type+"' />"),this.tileInner=b("<div class='tile-inner' />"),this._setColor(this.color),this.tilePanel.append(this.tileInner),this.iconImg=b("<img class='tile-icon' />"),this.iconImg.prop("src",this.icon),this.iconImg.css({width:this.iconSize+"px",height:this.iconSize+"px",left:(this.width-this.iconSize)/2+"px",top:(this.height-this.iconSize)/2+"px"}),this.smallIconImg=null,"small"!==this.type?(this.contentPanel=b("<div class='tile-content' />"),this.contentPanel.append(this.iconImg),this.titlePanel=b("<div class='tile-title' />"),this._setTitle(this.title),this.tileInner.append(this.contentPanel).append(this.titlePanel),this.isDynamic&&this.updateStyle.render.call(this)):this.tileInner.append(this.iconImg),this.linkAnchor=null,a.core.isString(this.link)&&this.link.length>0&&(this.linkAnchor=b("<a class='tile-link "+this.type+"' />"),this.linkAnchor.prop("href",this.link),this.tilePanel.append(this.linkAnchor))},_setColor:function(a){a&&a.length>0&&this.tileInner.css("background-color",a)},_setTitle:function(a){this.titlePanel&&this.titlePanel.html("<span class='tile-title-text'>"+a+"</span>")},update:function(b){var c,d,e;if(a.core.isString(b))c=["<p class='update-inner'><span>",b,"</span></p>"],c=c.join("");else if(Array.isArray(b)){for(c=[],c.push("<p class='update-inner'>"),d=0,e=b.length;d<e;d++)c.push("<span>",b[d],"</span>"),e<e-1&&c.push("<br />");c.push("</p>"),c=c.join("")}else a.core.isFunction(b)&&(c=b.call(this));this.isActivated=!1,this.animator.isStarted||(this.updateStyle.update.call(this,c),this.isDynamicChanged=!0)},restore:function(){this.animator.isStarted||(this.updateStyle.restore.call(this),this.isDynamicChanged=!1)},activate:function(a){this.isActivated=!0,this.activeTime=(new Date).getTime()+1e3*this.interval,!1!==a&&this.group.container.activateDynamicTile(this)}},d.prototype={constructor:d,initialize:function(b,d){var e=[],f=this;this.container=d,b.forEach(function(a){var b=new c(a,f);b.isDynamic&&f.container.putDynamicTile(b),e.push(b)}),a.ArrayLike.prototype.setArray.call(this,e),this.titleHeight=48,this._render()},_render:function(){var a,c;for(this.groupPanel=b("<div class='ui-tile-group' />"),this.groupPanel.css("visibility","hidden"),this.groupTitle=b("<div class='ui-tile-group-title' />"),this.groupContent=b("<div class='ui-tile-group-content' />"),this.groupPanel.append(this.groupTitle).append(this.groupContent),a=0,c=this.length;a<c;a++)this.groupContent.append(this[a].tilePanel)},_calculatePosition:function(a,b,c,d,e){var f,h,i,j,k,l,m,n,o,p;for(i=c.x,j=c.y;;){for(h=0;h<e;h++)b[j+h]||(b[j+h]=new Array(a*g.medium.countX));for(o=i,p=j,m=j,n=j+e;m<n;m++){for(f=b[m];;){if(k=i,(l=i+d)>f.length||k>=f.length){o=-1;break}for(;k<l;k++)if(f[k]){i=k+1,o=-1;break}if(-1!==o)break;o=i}if(-1===o)break}if(-1!==o&&-1!==p){for(c.x=o,c.y=p,m=p,n=p+e;m<n;m++)for(f=b[m],k=o,l=o+d;k<l;k++)f[k]=!0;return}i=0,j+=2}},arrange:function(b){var c,d,e,f,h,i,j,k,l,m;if(!a.core.isNumber(b)||b<=0)throw new TypeError("the arguments size: "+b+" is invalid.");for(e=g.medium,k=[],l={x:0,y:0},c=0,d=this.length;c<d;)if(m=this[c],m.countX<=e.countX&&m.countY<=e.countY?this._calculatePosition(b,k,l,e.countX,e.countY):this._calculatePosition(b,k,l,m.countX,m.countY),"small"===m.type){for(f=g.medium.countX*g.medium.countY,h=l.x,i=l.y,j=1;j<=f&&(m=this[c])&&"small"===m.type;)m.tilePanel.css({top:i*(g.small.height+4)+"px",left:h*(g.small.width+4)+"px"}),j++,h%g.medium.countX==0?h=l.x+1:(h=l.x,i=l.y+Math.floor(j/g.medium.countX)),c++;l.x+=g.medium.countX}else m.tilePanel.css({top:l.y*(g.small.height+4)+"px",left:l.x*(g.small.width+4)+"px"}),l.x+=m.countX,c++;d=k[0].length,this.width=d*g.small.width+4*(d-1),d=k.length,this.height=d*g.small.height+4*(d-1),this.groupContent.css("height",this.height+"px"),this.height+=this.titleHeight,this.groupPanel.css({width:this.width+"px",height:this.height+"px"})},addTile:function(b){var d=new c(b);a.ArrayLike.prototype.push.call(this,d),this.container._registerLayoutTask()},removeTile:function(a){var b,d;if(a instanceof c){for(d=-1,b=this.length-1;b>=0;b--)if(this[b]===a){d=b;break}-1!==d&&this.removeAt(d)}},removeAt:function(b){if(!a.core.isNumber(b))throw new TypeError("the arguments index is not a number.");b<0||b>=this.length||(a.ArrayLike.prototype.splice.call(this,b,1),this.container._registerLayoutTask())}},e.prototype={constructor:e,initialize:function(c){this.groups=[],this.dynamicTiles=a.KeyArray(),this.dynamicTiles.activeCount=0,this.container=a.getJQueryElement(c),this.container?this.container.addClass("ui-tile-container"):this.container=b("<div class='ui-tile-container' />"),a.core.isTouchAvailable()&&this.container.css("-webkit-overflow-scrolling","touch"),this.containerWidth=this.container.width(),this.containerHeight=this.container.height(),this.tileMargin=b("<div class='tile-margin' />"),this.container.append(this.tileMargin)},_register:function(b){var c;this.dynamicTiles.activeCount<=0||this.dynamicDelayHandler||((!a.core.isNumber(b)||b<=0)&&(b=1e3),c=this,this.dynamicDelayHandler=setTimeout(function(){var b,d,e,f;if(f=(new Date).getTime(),c.dynamicDelayHandler=null,c.dynamicTiles.activeCount>0){for(b=0,d=c.dynamicTiles.length;b<d;b++)if(e=c.dynamicTiles[b],e.isActivated&&f>e.activeTime){e.isActivated=!1,c.dynamicTiles.activeCount--;try{e.updateFn.call(c,e)}catch(b){a.handleError(b)}}c.dynamicTiles.activeCount>0&&c._register()}},b))},_calculateGroupLayoutInfo:function(a){var b,c,d,e;return c=g.medium,b=4,e=b*c.width+4*(b-1),d=Math.floor((a-48)/(e+48)),d>1&&1===this.groups.length&&(d=1),d<1?(b=Math.floor(a/(c.width+48)))<2&&(b=2):1===d&&(b+=Math.floor((a-48-e)/(c.width+48)))%2&&b--,{groupCount:d||1,groupSize:b}},_registerLayoutTask:function(){a.core.isNumber(this._layoutTaskHandler)||(this._layoutTaskHandler=a.setMicroTask(function(){this._layoutTaskHandler=null,this.layout(this.containerWidth,this.containerHeight)}.bind(this)))},layout:function(b,c){var d,e,f,g,h,i,j,k,l,m;if(!a.core.isNumber(b)||b<=0)throw new TypeError("the arguments containerWidth: "+b+" is invalid.");if(!a.core.isNumber(c)||c<=0)throw new TypeError("the arguments containerHeight: "+c+" is invalid.");if(0!==this.groups.length){for(this.containerWidth=b,this.containerHeight=c,d=this._calculateGroupLayoutInfo(b),f=[],k=0,l=this.groups.length;k<l;)for(m=0;m<d.groupCount&&!(k>=l);m++)i=this.groups[k],i.arrange(d.groupSize),f[m]||(f[m]=0),f[m]+=i.height,k++;for(m=0,k=0,l=f.length;k<l;k++)m<f[k]&&(m=f[k]);for(f=m,f+=48,h=0,f>c&&(h=a.scrollbarWidth),e=this.groups[0].width*d.groupCount+48*(d.groupCount-1),g=(b-h-e)/2,
j={},k=0,l=this.groups.length;k<l;)for(j.left=g,m=0;m<d.groupCount&&!(k>=l);m++)i=this.groups[k],void 0===j[m]&&(j[m]=0),i.left=j.left,i.top=j[m],i.groupPanel.css({left:i.left+"px",top:i.top+"px",visibility:"visible"}),j.left+=i.width+48,j[m]+=i.height,k++;this.tileMargin.css("top",f+"px")}},addGroup:function(a,b){var c;Array.isArray(a)&&(b=a,a=null),Array.isArray(b)&&0!==b.length&&(c=new d(b,this),a&&c.groupTitle.html("<span>"+a+"</span>"),this.groups.push(c),this.container.append(c.groupPanel))},putDynamicTile:function(a){var b;if(!(b=a.name))throw new TypeError("tileName can not be null");if(this.dynamicTiles.hasOwnProperty(b))throw new TypeError("The dynamicTile is exist which name is '"+b+"'");this.dynamicTiles.set(b,a),a.activate()},getDynamicTileByName:function(a){return this.dynamicTiles.get(a+"")||null},activateDynamicTile:function(a){this.dynamicTiles.activeCount++,this._register()}},a.TileContainer=e}(ui,$),function(a,b){function c(a){return a<10?"0"+a:""+a}function d(){var a;return a=new Date,{year:a.getFullYear(),month:c(a.getMonth()+1),day:a.getDate().toString(),week:"星期"+f.charAt(a.getDay())}}var e,f;a.tiles||(a.tiles={}),f="日一二三四五六",e={medium:function(a){var b,c;b=d(),c=[],c.push("<span class='day-text'>",b.day,"</span>"),c.push("<span class='week-text'>",b.week,"</span>"),c.push("<span class='year-month-text'>",b.year,".",b.month,"</span>"),a.updatePanel.html(c.join("")),a.isDynamicChanged||(a.smallIconImg&&(a.smallIconImg.remove(),a.smallIconImg=null),a.update())},wide:function(a){var b,c;b=d(),c=[],c.push("<span class='day-text'>",b.day,"</span>"),c.push("<span class='week-text'>",b.week,"</span>"),c.push("<span class='year-month-text'>",b.year,".",b.month,"</span>"),a.updatePanel.html(c.join("")),a.isDynamicChanged||(a.smallIconImg&&(a.smallIconImg.remove(),a.smallIconImg=null),a.update())},large:function(a){e.wide.apply(this,arguments)}},a.tiles.calendar=function(a){var b;e[a.type].apply(this,arguments),b=new Date,b=60*b.getHours()*60+60*b.getMinutes()+b.getSeconds(),a.interval=86400-b,a.activate()}}(ui,$),function(a,b){function c(a){return a<10?"0"+a:""+a}function d(){var a;return a=new Date,{hour:c(a.getHours()),minute:c(a.getMinutes()),spliter:":"}}var e;a.tiles||(a.tiles={}),e={medium:function(a){var b,c;b=d(),c=[],c.push("<span class='clock-hour'>",b.hour,"</span>"),c.push("<span class='clock-minute'>",b.minute,"</span>"),a.updatePanel.html(c.join("")),a.isDynamicChanged||(a.updatePanel.css({"text-align":"center",height:a.height+"px"}),a.smallIconImg&&(a.smallIconImg.remove(),a.smallIconImg=null),a.update())},wide:function(a){var b,c;b=d(),c=[],c.push("<span class='clock-hour'>",b.hour,"</span>"),c.push("<span class='clock-spliter'></span>"),c.push("<span class='clock-minute'>",b.minute,"</span>"),a.updatePanel.html(c.join("")),a.isDynamicChanged||(a.updatePanel.css({"text-align":"center","line-height":a.height-8+"px",height:a.height+"px"}),a.smallIconImg&&(a.smallIconImg.remove(),a.smallIconImg=null),a.update())},large:function(a){e.wide.apply(this,arguments)}},a.tiles.clock=function(a){e[a.type].apply(this,arguments),a.activate()}}(ui,$),function(a,b){function c(a){var c;c=a.pictureContext,c.currentImagePanel=b("<div class='tile-picture-container' />"),c.currentImage=b("<img class='tile-picture' />"),c.currentImagePanel.append(c.currentImage),c.nextImagePanel=b("<div class='tile-picture-container' />"),c.nextImagePanel.css("display","none"),c.nextImage=b("<img class='tile-picture' />"),c.nextImagePanel.append(c.nextImage),a.updatePanel.append(c.currentImagePanel).append(c.nextImagePanel)}function d(b){b.pictureContext.switchAnimator=a.animator({ease:a.AnimationStyle.easeTo,duration:500,begin:0,end:-b.height,onChange:function(a){this.target.css("top",a+"px")}}).add({ease:a.AnimationStyle.easeTo,duration:500,begin:b.height,end:0,onChange:function(a){this.target.css("top",a+"px")}})}function e(b,c,d){var f,g,i;g=b.pictureContext,0!==g.images.length&&(f=g.images[g.currentIndex],i=function(a){c.css(a),c.prop("src",f),d(b)},g.imageSizeCache.hasOwnProperty(f)?i(g.imageSizeCache[f]):g.imageLoader.load(f,b.width,b.height,a.ImageLoader.centerCrop).then(function(a){var b={width:a.displayWidth+"px",height:a.displayHeight+"px",top:a.marginTop+"px",left:a.marginLeft+"px"};g.imageSizeCache[f]=b,i(b)},function(){g.images.splice(index,1),g.images.length>0&&(h(b),e(b,c,d))}))}function f(a){var b=a.pictureContext;a.update(),setTimeout(function(){b.currentImage.addClass("tile-picture-play")},1e3),setTimeout(function(){b.images.length>1&&(h(a),e(a,b.nextImage,g))},1e4)}function g(a){var b,c,d;c=a.pictureContext,b=c.currentImagePanel,c.currentImagePanel=c.nextImagePanel,c.nextImagePanel=b,b=c.currentImage,c.currentImage=c.nextImage,c.nextImage=b,d=c.switchAnimator[0],d.target=c.nextImagePanel,d=c.switchAnimator[1],d.target=c.currentImagePanel,d.target.css({top:a.height+"px",display:"block"}),c.switchAnimator.start().then(function(){c.nextImagePanel.css("display","none"),c.nextImage.removeClass("tile-picture-play"),setTimeout(function(){c.currentImage.addClass("tile-picture-play"),setTimeout(function(){c.images.length>1&&(h(a),e(a,c.nextImage,g))},1e4)},500)})}function h(a){var b,c;b=a.pictureContext,c=b.currentIndex+1,c>=b.images.length&&(c=0),b.currentIndex=c}a.tiles||(a.tiles={}),a.tiles.picture=function(b,g){var h,i,j;if(Array.isArray(g)){for(j=[],h=0,i=g.length;h<i;h++)g[h]&&j.push(g[h]);0!==j.length&&(b.pictureContext={images:j,currentIndex:0,imageSizeCache:{},imageLoader:new a.ImageLoader},c(b),d(b),e(b,b.pictureContext.currentImage,f))}}}(ui,$),function(a,b){function c(b){var c,d,e,f,g=null;if(Array.isArray(b))for(f=new Date,c=0,d=b.length;c<d;c++)e=b[c],e.date=a.date.parseJSON(e.date),e.date&&e.date.getFullYear()===f.getFullYear()&&e.date.getMonth()===f.getMonth()&&e.date.getDate()===f.getDate()&&(g=e);return g}function d(a){var b=a.getMonth()+1,c=a.getDate();return(b<10?"0"+b:b)+"/"+(c<10?"0"+c:c)}function e(a){var b,c,d=new Date;return d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0),a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),b=parseInt(a.getTime()/1e3/60/60/24-d.getTime()/1e3/60/60/24,10),c=function(a){return"周"+"日一二三四五六".charAt(a)},b<-1?c(a.getDay()):b<0?"昨天":b<1?"今天":b<2?"明天":c(a.getDay())}function f(a){return"晴朗"}function g(a){return{htmlBuilder:[],weatherData:a,weatherToday:c(a.days),graph:h,info:i,days:j,build:k}}function h(){var a=this.htmlBuilder;return a.push("<div class='weather-graph'>"),l.apply(this,arguments),a.push("</div>"),this}function i(){var a=this.htmlBuilder;return a.push("<div class='weather-info'>"),l.apply(this,arguments),a.push("</div>"),this}function j(){var b,c,g,h=this.htmlBuilder,i=this.weatherData;if(Array.isArray(i.days)){for(h.push("<ul class='weather-days'>"),c=0,g=i.days.length;c<g;c++)b=i.days[c],h.push("<li class='weather-day'",0===c?" style='height:150px'":"",">"),h.push("<div class='weather-item'",0===c?" style='opacity:1'":"",">"),this.graph(),this.weatherToday=b,this.info(m,n,o,p),h.push("</div>"),h.push("<div class='weather-handle",0===c?" weather-current-handle":"","'>"),h.push("<span class='weather-text'>",a.str.format("{0}&nbsp;({1})&nbsp;{2}&nbsp;&nbsp;{3}",d(b.date),e(b.date),a.str.format("{0}℃ - {1}℃",b.low,b.high),f(i.type)),"</span>"),h.push("</div>"),h.push("</li>");h.push("</ul>")}return this}function k(){return this.htmlBuilder.join("")}function l(){var b,c,d;for(d=this.weatherToday,b=0,c=arguments.length;b<c;b++)a.core.isFunction(arguments[b])&&arguments[b].call(this,d)}function m(a){var b=this.htmlBuilder,c=this.weatherData;b.push("<h6 class='weather-city'>",c.city,"</h6>")}function n(a){var b=this.htmlBuilder;b.push("<h3 class='weather-temperature'>"),a.temperature&&b.push("<span class='weather-curr-temp'>",a.temperature,"<span style='font-size:22px;'>℃</span>","</span>"),b.push("<span class='weather-low-high'>",a.low,"℃ / ",a.high,"℃","</span>"),b.push("</h3>")}function o(a){this.htmlBuilder.push("<h6 class='weather-description'>",a.description,"</h6>")}function p(a){this.htmlBuilder.push("<h6 class='weather-wind'>",a.windDirection,"</h6>")}function q(c){var d,e;d=c.weatherContext,d.changeDayAnimator=a.animator({ease:a.AnimationStyle.easeFromTo,onChange:function(a){this.target.css("height",a+"px"),this.original.css("height",this.end-(a-this.begin)+"px")}}).add({ease:a.AnimationStyle.easeTo,onChange:function(a){this.target.css("opacity",a/100),this.original.css("opacity",(this.end-a)/100)}}),d.changeDayAnimator.duration=500,e=d.parent.children(".weather-days"),d.current=b(e.children()[0]),e.on("click",r.bind(c))}function r(a){var c,d,e,f,g,h,i;for(d=b(a.target);!d.hasClass("weather-handle");){if("LI"===(f=d.nodeName())||"UL"===f)return;d=d.parent()}c=this.weatherContext,d.parent()[0]!==c.current[0]&&(c.changeDayAnimator.isStarted||(g=c.current,e=g.children(".weather-item"),e.removeClass("active-dynamic"),g.children(".weather-handle").removeClass("weather-current-handle"),h=d.parent(),h.children(".weather-handle").addClass("weather-current-handle"),c.current=h,i=c.changeDayAnimator[0],i.original=g,i.target=h,i.begin=22,i.end=150,i=c.changeDayAnimator[1],i.original=e,i.target=h.children(".weather-item"),i.begin=0,i.end=100,e=c.current.children(".weather-item"),c.changeDayAnimator.start().then(function(){e.addClass("active-dynamic")})))}var s;a.tiles||(a.tiles={}),s={medium:function(a,b){var c;c=g(b).graph().info(n,o).build(),a.weatherContext.parent.html(c),a.update()},wide:function(a,b){var c;c=g(b).graph().info(m,n,o,p).build(),a.weatherContext.parent.html(c),a.update()},large:function(a,b){var c;c=g(b).days().build(),a.weatherContext.parent.html(c),setTimeout(function(){q(a)},1e3),a.update()}},a.tiles.weather=function(a,b){a.weatherContext={weatherData:b},"moveup"===a.tileInfo.updateStyle?(a.weatherContext.parent=a.updatePanel,a.smallIconImg.remove(),a.titlePanel.remove()):a.weatherContext.parent=a.tileInnerBack,s[a.type].apply(this,arguments)}}(ui,$),function(a,b){function c(a){if(!(this instanceof c))return new c(a);this.initialize(a)}c.prototype={constructor:c,initialize:function(c){if(c||(c={}),this.toolbarPanel=a.getJQueryElement(c.toolbarId),this.toolbarPanel){this.height=this.toolbarPanel.height(),this.tools=this.toolbarPanel.children(".tools"),this.extendPanel=this.toolbarPanel.children(".toolbar-extend"),this.extendPanel.length>0&&(this.defaultExtendShow=!!c.defaultExtendShow,this._initExtendPanel());for(var d,e=0,f=this.tools.length;e<f;e++)d=b(this.tools[e]).children(".action-buttons"),d.length>0&&d.children(".tool-action-button").addClass("font-highlight-hover")}},_initExtendPanel:function(){this.extendHeight=parseFloat(this.extendPanel.css("height")),this._wrapExtendPanel(),this._createExtendAnimator(),this._initExtendButton(),this._initPinButton(),this.defaultExtendShow&&(this.showExtend(!1),this.pinExtend())},_wrapExtendPanel:function(){var a=this.toolbarPanel.css("position");"absolute"!==a&&"relative"!==a&&"fixed"!==a&&this.toolbarPanel.css("position","relative"),this.extendWrapPanel=b("<div style='position:absolute;height:0px;width:100%;display:none;overflow:hidden;'/>"),this.extendWrapPanel.css("top",this.height+"px"),this.extendPanel.css("top",-this.extendHeight+"px"),this.extendPanel.addClass("clear"),this.extendWrapPanel.append(this.extendPanel),this.toolbarPanel.append(this.extendWrapPanel)},_createExtendAnimator:function(){this.extendAnimator=a.animator({target:this.extendPanel,ease:a.AnimationStyle.easeFromTo,onChange:function(a){this.target.css("top",a+"px")}}).add({target:this.extendWrapPanel,ease:a.AnimationStyle.easeFromTo,onChange:function(a){this.target.css("height",a+"px")}}),this.extendAnimator.duration=300},_initExtendButton:function(){this.extendButton=this.toolbarPanel.find(".tool-extend-button");var a,c;0===this.extendButton.length&&(a=b("<ul class='tools' style='float:right;margin-left:0px;'></ul>"),c=b("<li class='tool-item action-buttons'></li>"),a.append(c),0===this.tools.length?this.extendPanel.parent().before(a):b(this.tools[0]).before(a),this.tools=this.toolbarPanel.children(".tools"),this.extendButton=b("<a class='tool-action-button tool-extend-button' href='javascript:void(0)' title='更多'><i class='far fa-ellipsis-h'></i></a>"),c.append(this.extendButton));var d=this;this.extendButton.on("click",function(a){d.isExtendShow()?d.hideExtend():d.showExtend()})},_initPinButton:function(){this.pinButton=b("<a class='tool-extend-pin-button font-highlight-hover' href='javascript:void(0)' title='固定扩展区域'><i class='far fa-thumbtack'></i></a>"),this.extendWrapPanel.append(this.pinButton);var a=this;this.pinButton.on("click",function(b){a.isExtendPin()?a.unpinExtend():a.pinExtend()})},isExtendShow:function(){return this.extendButton.hasClass("extend-show")},showExtend:function(a){var b;this.extendAnimator.isStarted||(this.extendButton.addClass("extend-show").removeClass("font-highlight-hover").addClass("background-highlight"),this._cssOverflow=this.toolbarPanel.css("overflow"),this.toolbarPanel.css("overflow","visible"),!1===a?(this.extendWrapPanel.css({height:this.extendHeight+"px",display:"block"}),this.extendPanel.css("top","0px")):(b=this.extendAnimator[0],b.begin=-this.extendHeight,b.end=0,b=this.extendAnimator[1],b.begin=0,b.end=this.extendHeight,b.target.css({height:"0px",display:"block"}),this.extendAnimator.start()))},hideExtend:function(a){var b,c;this.extendAnimator.isStarted||(this.extendButton.removeClass("extend-show").addClass("font-highlight-hover").removeClass("background-highlight"),!1===a?(this.extendWrapPanel.css({height:"0px",display:"none"}),this.extendPanel.css("top",-this.extendHeight+"px"),this.toolbarPanel.css("overflow",this._cssOverflow)):(c=this,b=this.extendAnimator[0],b.begin=0,b.end=-this.extendHeight,b=this.extendAnimator[1],b.begin=this.extendHeight,b.end=0,this.extendAnimator.start().then(function(){c.toolbarPanel.css("overflow",c._cssOverflow),b.target.css("display","none")})))},_fireResize:function(){a.page.fire("resize")},isExtendPin:function(){return this.pinButton.hasClass("extend-pin")},pinExtend:function(){this.pinButton.addClass("extend-pin"),this.pinButton.children("i").removeClass("fa-thumbtack").addClass("fa-angle-up"),this.extendButton.css("display","none"),this.height=this.height+this.extendHeight,this.toolbarPanel.css("height",this.height+"px"),this._fireResize()},unpinExtend:function(){this.pinButton.removeClass("extend-pin"),this.pinButton.children("i").removeClass("fa-angle-up").addClass("fa-thumbtack"),this.extendButton.css("display","inline-block"),this.height=this.height-this.extendHeight,this.toolbarPanel.css("height",this.height+"px"),this._fireResize(),this.hideExtend()}},a.Toolbar=c}(ui,$);